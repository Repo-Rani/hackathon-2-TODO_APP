apiVersion: dapr.io/v1alpha1
kind: Component
metadata:
  name: conversation-state
  namespace: todo
spec:
  type: state.postgresql
  version: v1
  metadata:
  - name: connectionString
    secretKeyRef:
      name: todo-secrets
      key: database-url
  - name: tableName
    value: "conversation_state"
  - name: schemaName
    value: "public"
  - name: keyPrefix
    value: "conversation"
  - name: ttlInSeconds
    value: "7776000"  # 90 days
scopes:
  - todo-backend
